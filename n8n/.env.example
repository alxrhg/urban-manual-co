# n8n Configuration for The Urban Manual
# Copy this file to .env and fill in your values

# ================================
# n8n Basic Settings
# ================================

# Host and Protocol
N8N_HOST=localhost
N8N_PROTOCOL=http
# For production with SSL: N8N_PROTOCOL=https

# Webhook URL (used for receiving webhooks from external services)
WEBHOOK_URL=http://localhost:5678/

# Timezone (set to your local timezone)
# See: https://en.wikipedia.org/wiki/List_of_tz_database_time_zones
TIMEZONE=America/New_York

# ================================
# n8n Security
# ================================

# Basic Authentication (recommended for initial setup)
N8N_BASIC_AUTH_USER=admin
N8N_BASIC_AUTH_PASSWORD=change_this_secure_password_123

# For production, consider using:
# - N8N_USER_MANAGEMENT_DISABLED=false (enable user management)
# - JWT authentication
# - OAuth2

# ================================
# n8n Execution Settings
# ================================

# Maximum execution timeout in seconds (default: 300 = 5 minutes)
EXECUTIONS_TIMEOUT=300

# Maximum timeout for long-running workflows (default: 600 = 10 minutes)
EXECUTIONS_TIMEOUT_MAX=600

# Allow external npm modules in Function nodes
NODE_FUNCTION_ALLOW_EXTERNAL=*

# Allow Node.js built-in modules
NODE_FUNCTION_ALLOW_BUILTIN=*

# ================================
# The Urban Manual - Required Services
# ================================

# Supabase (from your main .env)
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
POSTGRES_URL=postgresql://postgres.[PROJECT-REF]:[PASSWORD]@aws-0-us-east-1.pooler.supabase.com:6543/postgres?pgbouncer=true

# OpenAI (required for AI workflows)
OPENAI_API_KEY=sk-your-openai-api-key

# Google AI (for Gemini recommendations)
GOOGLE_AI_API_KEY=your_google_ai_api_key

# Google Maps/Places API
NEXT_PUBLIC_GOOGLE_API_KEY=your_google_maps_api_key

# ================================
# The Urban Manual - Optional Services
# ================================

# ML Service URL (adjust if running on different host)
# Local development: http://host.docker.internal:8000
# Production: https://your-ml-service.railway.app
ML_SERVICE_URL=http://host.docker.internal:8000

# Upstash Redis (for rate limiting)
UPSTASH_REDIS_REST_URL=your_upstash_redis_url
UPSTASH_REDIS_REST_TOKEN=your_upstash_redis_token

# ================================
# Optional: Email Service (for user notifications)
# ================================

# SendGrid
# SENDGRID_API_KEY=your_sendgrid_api_key
# SENDGRID_FROM_EMAIL=noreply@theurbanmanual.com

# Or Resend
# RESEND_API_KEY=your_resend_api_key

# ================================
# Optional: Slack (for admin notifications)
# ================================

# SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL
# SLACK_BOT_TOKEN=xoxb-your-slack-bot-token

# ================================
# Optional: Production Database (PostgreSQL)
# ================================

# For production, you can use PostgreSQL instead of SQLite
# Uncomment and configure these:

# DB_TYPE=postgresdb
# DB_POSTGRESDB_HOST=your_postgres_host
# DB_POSTGRESDB_PORT=5432
# DB_POSTGRESDB_DATABASE=n8n
# DB_POSTGRESDB_USER=n8n_user
# DB_POSTGRESDB_PASSWORD=your_secure_password
# DB_POSTGRESDB_SCHEMA=public

# ================================
# Optional: Queue Mode (for high-load production)
# ================================

# For production with heavy workflows, enable queue mode with Redis
# QUEUE_BULL_REDIS_HOST=your_redis_host
# QUEUE_BULL_REDIS_PORT=6379
# QUEUE_BULL_REDIS_DB=0
# QUEUE_BULL_REDIS_PASSWORD=your_redis_password

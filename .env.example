# =============================================================================
# DATABASE CONFIGURATION (Required)
# =============================================================================

# Supabase
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key

# PostgreSQL Database (for Payload CMS)
# Get this from Supabase Dashboard > Project Settings > Database > Connection String
# Use the "Connection pooling" URI for better performance
POSTGRES_URL=postgresql://postgres.[PROJECT-REF]:[PASSWORD]@aws-0-us-east-1.pooler.supabase.com:6543/postgres

# Payload CMS Secret (minimum 32 characters)
# Generate with: openssl rand -base64 32
PAYLOAD_SECRET=your-payload-secret-key-here

# =============================================================================
# GOOGLE CLOUD DISCOVERY ENGINE (Optional - Premium Feature)
# =============================================================================
# Note: Discovery Engine is OPTIONAL and provides advanced search features.
# The app works perfectly without it using standard Supabase search.
# If not configured, /api/search/discovery returns 503 with {fallback: true}
# See DISCOVERY_ENGINE_SETUP.md for complete setup instructions.

# Google Cloud Project Configuration
GOOGLE_CLOUD_PROJECT_ID=your-gcp-project-id
GOOGLE_CLOUD_LOCATION=global

# Discovery Engine Data Store
DISCOVERY_ENGINE_DATA_STORE_ID=urban-manual-destinations
DISCOVERY_ENGINE_COLLECTION_ID=default_collection

# Authentication - Choose ONE method:
# Method 1: Local Development - Path to service account key file
GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account-key.json

# Method 2: Production/Vercel - Service account key as JSON string
# GOOGLE_CLOUD_CREDENTIALS_JSON='{"type":"service_account","project_id":"...","private_key":"...","client_email":"..."}'

# =============================================================================
# GOOGLE SERVICES (Various Features)
# =============================================================================

# Google Maps (required for map view feature)
NEXT_PUBLIC_GOOGLE_API_KEY=your_google_maps_api_key

# Google Gemini AI (required for AI search feature)
# Get from: https://makersuite.google.com/app/apikey
GOOGLE_AI_API_KEY=your_google_ai_api_key

# =============================================================================
# ML SERVICE (Optional - Python Microservice)
# =============================================================================

# ML Service (Python microservice for recommendations and forecasting)
# Local: http://localhost:8000
# Production: https://your-ml-service.railway.app or https://your-ml-service.fly.dev
ML_SERVICE_URL=http://localhost:8000

# =============================================================================
# CACHING & RATE LIMITING (Optional but Recommended)
# =============================================================================

# Upstash Redis (for rate limiting and caching)
# Optional but recommended for production
# Get from: https://upstash.com (free tier available)
# If not configured, in-memory rate limiting will be used as fallback
UPSTASH_REDIS_REST_URL=your_upstash_redis_url
UPSTASH_REDIS_REST_TOKEN=your_upstash_redis_token

# =============================================================================
# MAP SERVICES (Optional)
# =============================================================================

# Mapbox (for alternative map views)
NEXT_PUBLIC_MAPBOX_ACCESS_TOKEN=your_mapbox_access_token_here

# Apple MapKit JS (for interactive Apple Maps)
# See MAPKIT_SETUP.md for detailed setup instructions
# Requires Apple Developer Program ($99/year)
# Maps will show fallback UI if not configured
MAPKIT_TEAM_ID=your_10_character_team_id
MAPKIT_KEY_ID=your_10_character_key_id
MAPKIT_PRIVATE_KEY=-----BEGIN PRIVATE KEY-----
your_private_key_content_from_p8_file
-----END PRIVATE KEY-----

# Upstash Vector (for semantic search)
# Get from: https://console.upstash.com/vector
UPSTASH_VECTOR_REST_URL=your_upstash_vector_url
UPSTASH_VECTOR_REST_TOKEN=your_upstash_vector_token

# Upstash QStash (for scheduled jobs)
# Get from: https://console.upstash.com/qstash
UPSTASH_QSTASH_URL=your_upstash_qstash_url
UPSTASH_QSTASH_TOKEN=your_upstash_qstash_token
UPSTASH_QSTASH_CURRENT_SIGNING_KEY=your_current_signing_key
UPSTASH_QSTASH_NEXT_SIGNING_KEY=your_next_signing_key

# ML Service API Key (optional, for authenticating to ml-service)
ML_SERVICE_API_KEY=your_ml_service_api_key

# OpenAI API Key (required for embeddings fallback)
# Get from: https://platform.openai.com/api-keys
OPENAI_API_KEY=your_openai_api_key

# External Search APIs (optional, for Concierge feature)
# Tavily: https://tavily.com
# Exa: https://exa.ai
TAVILY_API_KEY=your_tavily_api_key
EXA_API_KEY=your_exa_api_key

# Gemini API Key (optional, for AI-powered descriptions and concierge)
# Get from: https://makersuite.google.com/app/apikey
GEMINI_API_KEY=your_gemini_api_key

# =============================================================================
# ERROR TRACKING & MONITORING (Recommended for Production)
# =============================================================================

# Sentry - Error tracking and performance monitoring
# Get from: https://sentry.io (free tier available)
# Required for production error tracking
NEXT_PUBLIC_SENTRY_DSN=https://your-sentry-dsn@o123456.ingest.sentry.io/1234567
SENTRY_DSN=https://your-sentry-dsn@o123456.ingest.sentry.io/1234567

# Sentry Auth Token (for source map uploads during build)
# Get from: Sentry > Settings > Auth Tokens
SENTRY_AUTH_TOKEN=your_sentry_auth_token

# Debug flags (set to 'true' to enable verbose logging)
# NEXT_PUBLIC_SENTRY_DEBUG=false
# SENTRY_DEBUG=false
# ENABLE_PRODUCTION_LOGS=false

# =============================================================================
# ANALYTICS (Optional)
# =============================================================================

# Statsig - Feature flags and A/B testing
# Get from: https://console.statsig.com
NEXT_PUBLIC_STATSIG_CLIENT_KEY=client-your_statsig_key
STATSIG_SERVER_SECRET=secret-your_statsig_secret

# =============================================================================
# PRODUCTION CONFIGURATION
# =============================================================================

# Site URL (required for production)
# Used for generating absolute URLs, sitemap, OpenGraph, etc.
NEXT_PUBLIC_SITE_URL=https://www.urbanmanual.co

# Supabase Service Role Key (server-side only, NEVER expose to client)
# Get from: Supabase Dashboard > Project Settings > API > service_role key
# Required for admin operations and cron jobs
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key

# =============================================================================
# USAGE NOTES
# =============================================================================
# 1. Copy this file to .env.local for local development
# 2. Never commit .env.local or credentials to version control
# 3. For Vercel deployment, add environment variables in project settings
# 4. Discovery Engine is optional - app works without it
# 5. Restart dev server after changing environment variables
# 6. See DISCOVERY_ENGINE_SETUP.md for Discovery Engine setup guide
